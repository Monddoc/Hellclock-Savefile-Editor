<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hell Clock Editor</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <header>
      <img id="header-img" src="icons/Header.png" alt="Header" />
      <div class="header-title">Hell Clock Editor</div>
    </header>

    <div class="container">
      <div class="upload-section" id="upload-zone">
        <div style="font-size: 3rem; margin-bottom: 15px">üìÇ</div>
        <div style="font-size: 1.2rem; font-weight: bold; color: #fff">
          Click or Drag Save File Here
        </div>
        <div style="color: #888; margin-top: 5px">
          PlayerSave0.json corresponds to First Save Slot
        </div>

        <div class="path-container">
          <p>Save File Location:</p>
          <div class="path-box">
            <code id="path-text"
              >%USERPROFILE%\AppData\LocalLow\Rogue Snail\Hell Clock</code
            >
            <button id="btn-copy-path" class="btn-copy" title="Copy Path">
              üìã
            </button>
          </div>
          <small>(Win+R and paste to open folder)</small>
        </div>

        <input id="file-upload" type="file" accept=".json" />
        <p
          id="filename-display"
          style="margin-top: 15px; color: var(--accent); font-weight: bold"
        ></p>
      </div>

      <div id="editor-ui">
        <div class="panel" style="margin-bottom: 20px">
          <div class="panel-header">
            <h2>Game Modes</h2>
            Cannot be edited
          </div>
          <div class="modes-grid">
            <div class="mode-box" id="mode-hardcore">
              <div class="status-dot inactive"></div>
              <div>
                <div class="info-label">Hardcore</div>
                <strong class="mode-status-text info-value">Unknown</strong>
              </div>
            </div>

            <div class="mode-box" id="mode-ascension">
              <div class="status-dot inactive"></div>
              <div>
                <div class="info-label">Ascension</div>
                <strong class="mode-status-text info-value">Unknown</strong>
              </div>
            </div>

            <div class="mode-box" id="mode-relaxed">
              <div class="status-dot inactive"></div>
              <div>
                <div class="info-label">Relaxed</div>
                <strong class="mode-status-text info-value">Unknown</strong>
              </div>
            </div>

            <div class="mode-box" id="mode-vengeance">
              <div class="status-dot inactive"></div>
              <div>
                <div class="info-label">Vengeance</div>
                <strong class="mode-status-text info-value">Unknown</strong>
              </div>
            </div>
          </div>
        </div>

        <div class="main-grid">
          <div class="column-left">
            <div class="panel">
              <div class="panel-header">
                <h2>General Stats</h2>
              </div>

              <div class="stat-row">
                <label>Soulstones</label>
                <input type="number" id="soulstones" min="0" />
              </div>

              <div class="stat-row">
                <label>Constellation Points</label>
                <input type="number" id="c-points" min="0" />
                <div id="c-points-info" class="cp-breakdown"></div>
              </div>

              <div class="stat-row">
                <label>Memory Level (Max 120)</label>
                <input type="number" id="memory-level" min="0" />
              </div>

              <div class="stat-row">
                <label>Highest Hell Level</label>
                <input type="number" id="hell-level" min="0" />
                <div
                  id="hell-lock-msg"
                  style="
                    font-size: 0.75rem;
                    color: #666;
                    margin-top: 5px;
                    display: none;
                  "
                >
                  üîí Requires Ascension Mode
                </div>
              </div>

              <div class="info-grid">
                <div class="info-box campaign-box">
                  <div id="campaign-dot" class="status-dot"></div>
                  <div>
                    <div class="info-label">Campaign Status</div>
                    <strong id="campaign-text" class="info-value"
                      >Unknown</strong
                    >
                  </div>
                </div>

                <div class="info-box">
                  <div class="info-icon">üèÉ</div>
                  <div>
                    <div class="info-label">Total Runs</div>
                    <strong id="total-runs" class="info-value">0</strong>
                  </div>
                </div>

                <div class="info-box">
                  <div class="info-icon">üíÄ</div>
                  <div>
                    <div class="info-label">Total Deaths</div>
                    <strong id="total-deaths" class="info-value">0</strong>
                  </div>
                </div>
              </div>
            </div>

            <div class="panel" id="summary-panel" style="display: none">
              <div class="panel-header">
                <h2>üìù Change Summary</h2>
              </div>
              <div id="change-log" class="change-log-box">
                <p style="color: #666; font-style: italic">
                  No changes made yet.
                </p>
              </div>
            </div>
          </div>

          <div class="column-right">
            <div class="panel">
              <div class="panel-header">
                <h2>Crafting Materials</h2>
              </div>
              <div id="materials-container" class="materials-grid"></div>
            </div>

            <div class="panel">
              <div class="panel-header">
                <h2>Missing Cursed Shrines</h2>
                <button id="btn-complete-all" class="btn-action">
                  ‚ú® Complete All
                </button>
              </div>
              <div id="shrines-container" class="shrine-grid"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="download-container">
      <button id="btn-download" class="btn-download">
        Download Modified Save
      </button>
    </div>

    <div id="welcome-modal" class="modal-overlay">
      <div class="modal-content">
        <h2>üöÄ How to Use</h2>
        <ul class="instruction-list">
          <li class="warning">
            <strong>‚ö†Ô∏è Backup your save file!</strong><br />
            Always make a copy of your <code>.json</code> file before editing
            <br />
            <strong>Use only your own save file!</strong>
          </li>
          <li>
            Click the <strong>Copy Path</strong> button (in the upload box) to
            get the save location:
            <div class="code-snippet">
              %USERPROFILE%\AppData\LocalLow\Rogue Snail\Hell Clock
            </div>
          </li>
          <li>Paste that path into your File Explorer address bar</li>
          <li>
            Drag and drop
            <strong>PlayerSave0.json</strong> into the editor
          </li>
          <li>Modify your resources or complete your cursed shrines</li>
          <li>Click <strong>"Download Modified Save"</strong></li>
          <li>
            Replace the original file in the folder with the downloaded one
          </li>
        </ul>
        <button id="btn-close-modal" class="btn-primary">Let's Go!</button>
      </div>
    </div>
    <script type="module" src="js/controller.js"></script>
  </body>
</html>
